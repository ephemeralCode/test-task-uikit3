/*! UIkit 3.17.1 | https://www.getuikit.com | (c) 2014 - 2023 YOOtheme | MIT License */(function(e,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],y):(e=typeof globalThis<"u"?globalThis:e||self,e.UIkitFilter=y(e.UIkit.util))})(this,function(e){"use strict";function y(n,s=[]){try{return n?e.startsWith(n,"{")?JSON.parse(n):s.length&&!e.includes(n,":")?{[s[0]]:n}:n.split(";").reduce((o,t)=>{const[r,a]=t.split(/:(.*)/);return r&&!e.isUndefined(a)&&(o[r.trim()]=a.trim()),o},{}):{}}catch{return{}}}function N(n){return v(e.observeResize,n,"resize")}function O(n){return v(e.observeMutation,n)}function v(n,s,o){return{observe:n,handler(){this.$emit(o)},...s}}O({options:{childList:!0,attributes:!0,attributeFilter:["style"]}}),N({target:({$el:n})=>[n,...e.children(n)]});function P(n){const s=[[]],o=n.some((t,r)=>r&&n[r-1].offsetParent!==t.offsetParent);for(const t of n){if(!e.isVisible(t))continue;const r=g(t,o);for(let a=s.length-1;a>=0;a--){const c=s[a];if(!c[0]){c.push(t);break}const d=g(c[0],o);if(r.top>=d.bottom-1&&r.top!==d.top){s.push([t]);break}if(r.bottom-1>d.top||r.top===d.top){let h=c.length-1;for(;h>=0;h--){const m=g(c[h],o);if(r.left>=m.left)break}c.splice(h+1,0,t);break}if(a===0){s.unshift([t]);break}}}return s}function g(n,s=!1){let{offsetTop:o,offsetLeft:t,offsetHeight:r,offsetWidth:a}=n;return s&&([o,t]=e.offsetPosition(n)),{top:o,left:t,bottom:o+r,right:t+a}}const w="uk-transition-leave",b="uk-transition-enter";function T(n,s,o,t=0){const r=u(s,!0),a={opacity:1},c={opacity:0},d=i=>()=>r===u(s)?i():Promise.reject(),h=d(async()=>{e.addClass(s,w),await Promise.all(S(s).map((i,l)=>new Promise(f=>setTimeout(()=>e.Transition.start(i,c,o/2,"ease").then(f),l*t)))),e.removeClass(s,w)}),m=d(async()=>{const i=e.height(s);e.addClass(s,b),n(),e.css(e.children(s),{opacity:0}),await q();const l=e.children(s),f=e.height(s);e.css(s,"alignContent","flex-start"),e.height(s,i);const p=S(s);e.css(l,c);const z=p.map(async(Q,X)=>{await B(X*t),await e.Transition.start(Q,a,o/2,"ease")});i!==f&&z.push(e.Transition.start(s,{height:f},o/2+p.length*t,"ease")),await Promise.all(z).then(()=>{e.removeClass(s,b),r===u(s)&&(e.css(s,{height:"",alignContent:""}),e.css(l,{opacity:""}),delete s.dataset.transition)})});return e.hasClass(s,w)?C(s).then(m):e.hasClass(s,b)?C(s).then(h).then(m):h().then(m)}function u(n,s){return s&&(n.dataset.transition=1+u(n)),e.toNumber(n.dataset.transition)||0}function C(n){return Promise.all(e.children(n).filter(e.Transition.inProgress).map(s=>new Promise(o=>e.once(s,"transitionend transitioncanceled",o))))}function S(n){return P(e.children(n)).flat().filter(e.isInView)}function q(){return new Promise(n=>requestAnimationFrame(n))}function B(n){return new Promise(s=>setTimeout(s,n))}async function H(n,s,o){await F();let t=e.children(s);const r=t.map(f=>$(f,!0)),a={...e.css(s,["height","padding"]),display:"block"};await Promise.all(t.concat(s).map(e.Transition.cancel)),n(),t=t.concat(e.children(s).filter(f=>!e.includes(t,f))),await Promise.resolve(),e.fastdom.flush();const c=e.attr(s,"style"),d=e.css(s,["height","padding"]),[h,m]=L(s,t,r),i=t.map(f=>({style:e.attr(f,"style")}));t.forEach((f,p)=>m[p]&&e.css(f,m[p])),e.css(s,a),e.trigger(s,"scroll"),e.fastdom.flush(),await F();const l=t.map((f,p)=>e.parent(f)===s&&e.Transition.start(f,h[p],o,"ease")).concat(e.Transition.start(s,d,o,"ease"));try{await Promise.all(l),t.forEach((f,p)=>{e.attr(f,i[p]),e.parent(f)===s&&e.css(f,"display",h[p].opacity===0?"none":"")}),e.attr(s,"style",c)}catch{e.attr(t,"style",""),V(s,a)}}function $(n,s){const o=e.css(n,"zIndex");return e.isVisible(n)?{display:"",opacity:s?e.css(n,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:o==="auto"?e.index(n):o,...I(n)}:!1}function L(n,s,o){const t=s.map((a,c)=>e.parent(a)&&c in o?o[c]?e.isVisible(a)?I(a):{opacity:0}:{opacity:e.isVisible(a)?1:0}:!1),r=t.map((a,c)=>{const d=e.parent(s[c])===n&&(o[c]||$(s[c]));if(!d)return!1;if(!a)delete d.opacity;else if(!("opacity"in a)){const{opacity:h}=d;h%1?a.opacity=1:delete d.opacity}return d});return[t,r]}function V(n,s){for(const o in s)e.css(n,o,"")}function I(n){const{height:s,width:o}=e.offset(n);return{height:s,width:o,transform:"",...e.position(n),...e.css(n,["marginTop","marginLeft"])}}function F(){return new Promise(n=>requestAnimationFrame(n))}var M={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(n,s=this.$el){const o=this.animation;return(o==="fade"?T:o==="delayed-fade"?(...r)=>T(...r,40):o?H:()=>(n(),Promise.resolve()))(n,s,this.duration).catch(e.noop)}}};const R={TAB:9,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};var E={mixins:[M],args:"target",props:{target:String,selActive:Boolean},data:{target:"",selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles({attrItem:n},s){return e.$$(`[${n}],[data-${n}]`,s)},children({target:n},s){return e.$$(`${n} > *`,s)}},watch:{toggles(n){this.updateState();const s=e.$$(this.selActive,this.$el);for(const o of n){this.selActive!==!1&&e.toggleClass(o,this.cls,e.includes(s,o));const t=K(o);e.isTag(t,"a")&&e.attr(t,"role","button")}},children(n,s){s&&this.updateState()}},events:{name:"click keydown",delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(n){n.type==="keydown"&&n.keyCode!==R.SPACE||e.closest(n.target,"a,button")&&(n.preventDefault(),this.apply(n.current))}},methods:{apply(n){const s=this.getState(),o=A(n,this.attrItem,this.getState());W(s,o)||this.setState(o)},getState(){return this.toggles.filter(n=>e.hasClass(n,this.cls)).reduce((n,s)=>A(s,this.attrItem,n),{filter:{"":""},sort:[]})},async setState(n,s=!0){n={filter:{"":""},sort:[],...n},e.trigger(this.$el,"beforeFilter",[this,n]);for(const o of this.toggles)e.toggleClass(o,this.cls,D(o,this.attrItem,n));await Promise.all(e.$$(this.target,this.$el).map(o=>{const t=()=>{j(n,o,e.children(o)),this.$update(this.$el)};return s?this.animate(t,o):t()})),e.trigger(this.$el,"afterFilter",[this])},updateState(){e.fastdom.write(()=>this.setState(this.getState(),!1))}}};function x(n,s){return y(e.data(n,s),["filter"])}function W(n,s){return["filter","sort"].every(o=>e.isEqual(n[o],s[o]))}function j(n,s,o){const t=G(n);o.forEach(c=>e.css(c,"display",t&&!e.matches(c,t)?"none":""));const[r,a]=n.sort;if(r){const c=J(o,r,a);e.isEqual(c,o)||e.append(s,c)}}function A(n,s,o){const{filter:t,group:r,sort:a,order:c="asc"}=x(n,s);return(t||e.isUndefined(a))&&(r?t?(delete o.filter[""],o.filter[r]=t):(delete o.filter[r],(e.isEmpty(o.filter)||""in o.filter)&&(o.filter={"":t||""})):o.filter={"":t||""}),e.isUndefined(a)||(o.sort=[a,c]),o}function D(n,s,{filter:o={"":""},sort:[t,r]}){const{filter:a="",group:c="",sort:d,order:h="asc"}=x(n,s);return e.isUndefined(d)?c in o&&a===o[c]||!a&&c&&!(c in o)&&!o[""]:t===d&&r===h}function G({filter:n}){let s="";return e.each(n,o=>s+=o||""),s}function J(n,s,o){return[...n].sort((t,r)=>e.data(t,s).localeCompare(e.data(r,s),void 0,{numeric:!0})*(o==="asc"||-1))}function K(n){return e.$("a,button",n)||n}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",E),E});
